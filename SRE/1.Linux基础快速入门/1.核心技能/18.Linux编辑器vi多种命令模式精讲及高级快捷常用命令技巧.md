> Vi是一种文本编辑器，它提供了多种命令模式，包括命令模式、插入模式、可视模式等。本文将讲解Vi的多种命令模式及其常用命令技巧，以及它们的原理、使用场景和实例。
>

## 命令模式

命令模式是Vi的默认模式，用于执行各种命令。以下是一些常用的命令：

- **i**: 进入插入模式，在光标所在位置插入文本。
- **a**: 进入插入模式，在光标所在位置后插入文本。
- **o**: 进入插入模式，在当前行下方新建一行并插入文本。
- **d**: 删除文本。
- **c**: 修改文本。
- **D**: 删除光标所在位置到行末的所有文本。
- **A**: 进入插入模式，在当前行的行末插入文本。
- **h/j/k/l**: 上下左右移动光标。
- **w**: 向后移动一个单词。
- **b**: 向前移动一个单词。
- **gg**: 移动到文本开头。
- **G**: 移动到文本结尾。
- **:w**: 保存文本。
- **:q**: 退出Vi。
- **:wq**: 保存并退出Vi。

## 插入模式

插入模式用于插入文本。以下是一些常用的命令：

- **Esc**: 退出插入模式，回到命令模式。
- **i**: 在光标所在位置插入文本。
- **a**: 在光标所在位置后插入文本。
- **o**: 在当前行下方新建一行并插入文本。

## 可视模式

可视模式用于选择文本。以下是一些常用的命令：

- **v**: 进入可视模式，按字符选择文本。
- **V**: 进入可视模式，按行选择文本。
- **Ctrl+v**: 进入可视模式，按列选择文本。

## 高级快捷常用命令技巧

Vi提供了许多高级快捷常用命令技巧，以下是一些常用的命令：

- **:%s/old/new/g**: 在整个文本中替换old为new。
- **:n1,n2s/old/new/g**: 在n1和n2行中替换old为new。
- **:set number**: 显示行号。
- **:set nonumber**: 隐藏行号。
- **:set autoindent**: 自动缩进。
- **:set noautoindent**: 取消自动缩进。
- **:set tabstop=4**: 设置Tab键的宽度为4个字符。
- **:set expandtab**: 使用空格代替Tab键。
- **:set noexpandtab**: 不使用空格代替Tab键。
- **:set syntax=python**: 设置语法高亮为Python语言。
- **:set nosyntax**: 取消语法高亮。
- **Ctrl+g**: 显示当前行号和文件信息。
- **u**: 撤销上一次操作。
- **Ctrl+r**: 重做上一次被撤销的操作。
- **y**: 复制选中的文本。
- **p**: 粘贴复制的文本。

## 使用场景和实例

以下是Vi常用命令的使用场景和实例：

- **i**: 在文本中插入新的内容。例如，在当前行的行首插入Hello World：在命令模式下按i键进入插入模式，在行首输入Hello World，按Esc键回到命令模式。
- **d**: 删除文本。例如，删除当前行：在命令模式下按dd键即可删除当前行。
- **c**: 修改文本。例如，将当前行的内容替换为Hello World：在命令模式下按cc键进入插入模式，将当前行的内容删除并输入Hello World，按Esc键回到命令模式。
- **:%s/old/new/g**: 在整个文本中替换old为new。例如，将所有的foo替换为bar：在命令模式下输入:%s/foo/bar/g，按Enter键执行替换。
- **:set number**: 显示行号。例如，在Vi中显示行号以便于定位文本位置：在命令模式下输入:set number，按Enter键即可显示行号。
- **:set autoindent**: 自动缩进。例如，在编写代码时自动缩进：在命令模式下输入:set autoindent，按Enter键即可开启自动缩进。
- **:set tabstop=4**: 设置Tab键的宽度为4个字符。例如，在编写代码时Tab键的宽度为4个字符：在命令模式下输入:set tabstop=4，按Enter键即可设置Tab键的宽度。
- **:set syntax=python**: 设置语法高亮为Python语言。例如，在编写Python代码时开启语法高亮：在命令模式下输入:set syntax=python，按Enter键即可设置语法高亮为Python语言。
- **y**: 复制选中的文本。例如，复制当前行：在命令模式下按yy键即可复制当前行。
- **p**: 粘贴复制的文本。例如，将复制的文本粘贴到当前行下方：在命令模式下按p键即可粘贴复制的文本。

总之，Vi是一个功能强大的文本编辑器，掌握它的各种命令模式和高级快捷常用命令技巧，可以大大提高文本编辑效率。